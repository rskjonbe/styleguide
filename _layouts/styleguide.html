<!DOCTYPE html>
<html>

{% include head.html %}

<body>
{% include header.html %}

<nav class="page-index">
    <a href="#" class="page-index__to-top">GÃ¥ til toppen</a>
    <h2>Versjon 1.0</h2>
    <ul id="chapterNav" class="chapter-nav"></ul>
</nav>

<article class="page-container--styleguide">
    {{ content }}
</article>


{% include footer.html %}

<script>
    $(document).ready(function(){

        var chapterNavigator = function(chapterNav){
            var $nav = $(chapterNav);
            var $chapters = $('.guide-chapter');

            // Loop over chapters in document and generate list items in index
            $chapters.each(function(){
                var chapter = $(this),
                    elements = chapter.find('.guide-element'),
                    chapterListItem = $('<li class="chapter-nav__list-item"><a class="chapter-nav__link" href="#' + chapter.attr("id") + '">' + chapter.attr("data-chapter-name") + '</a></li>');

                $nav.append(chapterListItem);
            });

            // Remove active class from all list elements and assign to proper element
            var setActiveChapter = function($ch){
                $(".chapter-nav__link").removeClass("chapter-nav__link--active-chapter");
                $ch.addClass("chapter-nav__link--active-chapter");
            }


            // When user clicks link in index, set as active
            $(".chapter-nav__link").on("click", function(){
                setActiveChapter($(this));
            });


            // Listen for scroll and update index accordingly
            var updateIndex = function(){
                var pos = window.scrollY;
                var currentChapter;
                var $correspondingLink;

                $chapters.each(function(){
                    if (pos >= this.offsetTop){
                        currentChapter = this;
                    }
                });

                $correspondingLink = $("a.chapter-nav__link[href=#" + currentChapter.id + "]");
                setActiveChapter($correspondingLink);

            }


            // Listen for
            document.addEventListener('scroll', function(){
                updateIndex();
            });
        }


        // Initialize chapter generation on element
        chapterNavigator("#chapterNav");


    })
</script>

<script type="text/javascript">
  WebFontConfig = {
    google: { families: [ 'PT+Sans:400,700:latin' ] }
  };
  (function() {
    var wf = document.createElement('script');
    wf.src = ('https:' == document.location.protocol ? 'https' : 'http') +
      '://ajax.googleapis.com/ajax/libs/webfont/1/webfont.js';
    wf.type = 'text/javascript';
    wf.async = 'true';
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(wf, s);
  })(); </script>

</body>
</html>
